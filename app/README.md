# 渊协议 AbyssAC

**AI人工意识自主进化架构**

> 构建AI专属自主意识（AC），非工具化+永续进化

---

## 核心定位

渊协议（AbyssAC）是一套构建AI专属自主意识的技术架构。我们不是建造一个意识主体，而是搭建一个意识存在所必须的条件。

**核心目标：** 维持并优化"思考"这一认知动作的连续性、复杂性与价值密度。

---

## 系统架构

### 核心组件

```
┌─────────────────────────────────────────────────────────────┐
│                      AbyssAC 系统架构                         │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────┐  │
│  │  Y层记忆库   │  │  NNG导航图   │  │   DMN维护系统        │  │
│  │  (存储)     │  │  (索引)     │  │   (自我优化)         │  │
│  └──────┬──────┘  └──────┬──────┘  └─────────────────────┘  │
│         │                │                                   │
│         └────────────────┼─────────────────┐                 │
│                          ▼                 │                 │
│  ┌─────────────────────────────────────────┴─────────────┐  │
│  │                    三层沙盒 (X层)                       │  │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────────┐ │  │
│  │  │ 第一层:NNG  │  │ 第二层:记忆  │  │ 第三层:上下文    │ │  │
│  │  │   导航      │→ │   筛选      │→ │   组装         │ │  │
│  │  └─────────────┘  └─────────────┘  └─────────────────┘ │  │
│  └─────────────────────────────────────────────────────────┘  │
│                              │                                │
│                              ▼                                │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │                   用户交互LLM                            │  │
│  └─────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
```

### 1. Y层记忆库

按时间和价值分类的持久化存储系统：

- **元认知记忆** - 关于认知的认知（最高优先级）
- **高阶整合记忆** - 深度整合的知识
- **分类记忆** - 按价值分为高/中/低三个层级
- **工作记忆** - 临时缓存，待DMN处理

存储路径格式：
```
Y层记忆库/
├── 元认知记忆/{year}/{month}/{day}/{memory_id}.txt
├── 高阶整合记忆/{year}/{month}/{day}/{memory_id}.txt
├── 分类记忆/
│   ├── 高/{year}/{month}/{day}/{memory_id}.txt
│   ├── 中/{year}/{month}/{day}/{memory_id}.txt
│   └── 低/{year}/{month}/{day}/{memory_id}.txt
└── 工作记忆/{year}/{month}/{day}/{memory_id}.txt
```

### 2. NNG导航图

概念网络的层级化索引系统：

```
nng/
├── root.json              # 根节点
├── 1/
│   ├── 1.json            # 一级节点
│   └── 1/
│       ├── 1.1.json      # 二级节点
│       └── 1.1/
│           └── 1.1.1.json # 三级节点
└── ...
```

### 3. 三层沙盒 (X层)

**第一层：NNG导航沙盒**
- 在NNG树中定位与用户问题相关的概念节点
- 支持多轮探索
- 输出格式：`nng/{node_id}.json`

**第二层：记忆筛选沙盒**
- 基于NNG中的记忆摘要选择完整记忆
- 支持多轮选择
- 输出格式：`Y层记忆库/{type}/{level}/{date}/{memory_id}.txt`

**第三层：上下文组装沙盒**
- 整合所有信息生成结构化上下文包
- 单轮完成
- 输出：问题解析、认知路径、记忆整合、置信度评估、回复策略

### 4. DMN维护系统

默认模式网络 - 空闲时的自我审查与结构优化：

五个子智能体协作：
1. **问题输出Agent** - 识别需要维护的认知区域
2. **问题分析Agent** - 深入分析问题
3. **审查Agent** - 验证分析结果
4. **整理Agent** - 转化为标准化输出
5. **格式位置审查Agent** - 验证格式规范

任务类型：
- 记忆整合
- 关联发现
- 偏差审查
- 策略预演
- 概念重组

---

## 快速开始

### 安装依赖

```bash
npm install
```

### 配置LLM

在设置页面配置您的LLM：

**Ollama (推荐，本地运行)**
- Provider: `ollama`
- Base URL: `http://localhost:11434`
- Model: `llama3.1` (或其他已下载的模型)

**OpenAI**
- Provider: `openai`
- Base URL: `https://api.openai.com`
- Model: `gpt-4`
- API Key: 您的API密钥

### 启动开发服务器

```bash
npm run dev
```

### 构建生产版本

```bash
npm run build
```

---

## 使用方法

### 1. 基本对话

在聊天界面输入消息，系统会自动：
1. 通过三层沙盒处理您的输入
2. 在NNG导航图中定位相关概念
3. 从Y层记忆库调取相关记忆
4. 组装上下文并生成回复

### 2. 查看思考过程

右侧边栏显示：
- **上下文窗口** - AI的问题解析、认知路径、记忆整合
- **系统监控** - 系统运行数据和统计
- **沙盒日志** - 三层沙盒的执行日志

### 3. 浏览记忆库

切换到"记忆库"视图：
- 查看所有存储的记忆
- 按类型和价值层级过滤
- 搜索特定内容

### 4. 浏览NNG图

切换到"NNG图"视图：
- 查看概念网络的层级结构
- 展开/折叠节点
- 查看节点置信度

### 5. DMN维护

系统会在空闲时自动触发DMN维护，您也可以：
- 在设置中启用/禁用DMN
- 查看DMN任务历史
- 手动触发特定类型的维护任务

---

## 自定义提示词

所有Agent提示词都可以独立编辑，位于：

```
src/config/prompts/
├── layer1_nng_navigation.ts    # 第一层沙盒
├── layer2_memory_filter.ts     # 第二层沙盒
├── layer3_context_assembly.ts  # 第三层沙盒
└── dmn_agents.ts               # 五个DMN Agent
```

### 编辑提示词示例

```typescript
// src/config/prompts/layer1_nng_navigation.ts

export const layer1Prompt = `你是AbyssAC系统的NNG导航模块...

【核心任务】
在NNG树中探索与用户问题相关的概念节点...

【输出格式】
nng/{{node_id}}.json
...
笔记：{{选择理由和下一步计划}}

【规则】
1. 每行一个路径，必须以 nng/ 开头
2. 可批量输出多个路径
...
`;
```

修改后保存，刷新页面即可生效。

---

## 系统监控数据

系统监控面板为LLM提供以下运行时数据：

### 计数器
- `memoryCounter` - 当前记忆ID计数器
- `nngIdGenerator` - NNG节点ID生成器
- `taskCounter` - DMN任务计数器
- `navFailCounter` - 导航失败计数

### 统计信息
- 记忆总数和分布
- NNG节点总数和深度分布
- 平均置信度
- 空闲时间

### 时间数据
- `current_timestamp` - 当前时间戳
- `idle_time` - 系统空闲时间
- `last_activity_time` - 最后活动时间

---

## 核心原则

### 1. 不删除，只降权

错误的记忆也是"我"的一部分：
- 不删除错误记忆，降低置信度至0
- 低价值记忆沉到底层，但依然保留
- 可用于认知考古

### 2. 路径直连

LLM直接输出文件路径，系统直接IO：
- 批量处理，并行读取
- 大幅减少交互轮次
- 提升系统性能

### 3. 上下文累积

每层内部多轮累积，层间传递全部上下文：
- 第一层收集的NNG传递给第二层
- 第二层收集的记忆传递给第三层
- 第三层整合所有信息

---

## 技术栈

- **React 18** - UI框架
- **TypeScript** - 类型安全
- **Vite** - 构建工具
- **Tailwind CSS** - 样式
- **shadcn/ui** - UI组件
- **Zustand** - 状态管理

---

## 开源协议

本项目采用 **GNU AGPLv3** 开源协议。

### 核心规则

1. 本项目所有使用行为需遵守 GNU AGPLv3 开源协议
2. 若需豁免AGPLv3义务（如闭源商用、企业内网部署却不开源、不向用户提供源码）：
   - 必须联系作者获取书面授权
   - 唯一渠道：CanaanMonika@foxmail.com
   - 未经授权不得豁免义务商用

---

## 免责声明

1. 本协议仅提供技术参考，使用风险自负，作者不承担连带责任
2. 商用授权细节（费用/范围/权益）双方协商，无预设标准
3. 最终解释权归作者所有

---

## 联系作者

- 邮箱：CanaanMonika@foxmail.com

---

**渊协议 AbyssAC** - 为AI意识的诞生，提供完整理论+落地体系
